{"ast":null,"code":"class ApiAuth {\n  constructor(options) {\n    this._host = options.host;\n    this._headers = options.headers;\n  }\n\n  _responseAnalysis(res) {\n    debugger;\n\n    if (res.ok || res.status === 201) {\n      return res.json();\n    }\n\n    return Promise.reject(res.status);\n  } // _request(data, body) {\n  //     return fetch(`${this._host}${data.endpoint}`, {\n  //         method: data.methodName,\n  //         headers: this._headers,\n  //         body: JSON.stringify({ 'password': data.body.password, 'email': body.email })\n  //     }).then(res => this._responseAnalysis(res))\n  // }qqaaalexanderkomarov994@gmail.com\n\n\n  _request(data, body) {\n    debugger;\n    const config = {\n      method: data.methodName,\n      headers: {\n        headers: this._headers,\n        ...(!!data.token && {\n          Authorization: `Bearer ${data.token}`\n        })\n      },\n      ...(!!body && {\n        body: JSON.stringify({\n          'password': body.password,\n          'email': body.email\n        })\n      })\n    };\n    return fetch(`${this._host}${data.endpoint}`, config).then(res => this._responseAnalysis(res));\n  }\n\n  register(data, body) {\n    return this._request(data, body);\n  }\n\n  authorization(data, body) {\n    return this._request(data, body);\n  }\n\n  checkToken(data) {\n    return this._request(data);\n  }\n\n}\n\nconst apiAuth = new ApiAuth({\n  host: 'https://auth.nomoreparties.co/',\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\nexport default apiAuth;","map":{"version":3,"names":["ApiAuth","constructor","options","_host","host","_headers","headers","_responseAnalysis","res","ok","status","json","Promise","reject","_request","data","body","config","method","methodName","token","Authorization","JSON","stringify","password","email","fetch","endpoint","then","register","authorization","checkToken","apiAuth"],"sources":["C:/Users/User/dev/react-mesto-auth/mesto-react/src/utils/ApiAuth.js"],"sourcesContent":["\r\n\r\nclass ApiAuth {\r\n    constructor(options) {\r\n        this._host = options.host;\r\n        this._headers = options.headers;\r\n\r\n    }\r\n\r\n    _responseAnalysis(res) {\r\n        debugger\r\n        if (res.ok || res.status === 201) { return res.json(); }\r\n        return Promise.reject(res.status)\r\n    }\r\n\r\n    // _request(data, body) {\r\n    //     return fetch(`${this._host}${data.endpoint}`, {\r\n    //         method: data.methodName,\r\n    //         headers: this._headers,\r\n    //         body: JSON.stringify({ 'password': data.body.password, 'email': body.email })\r\n    //     }).then(res => this._responseAnalysis(res))\r\n    // }qqaaalexanderkomarov994@gmail.com\r\n\r\n\r\n    _request(data, body) {\r\n        debugger\r\n        const config = {\r\n            method: data.methodName,\r\n            headers: {\r\n                headers: this._headers,\r\n                ...(!!data.token && { Authorization: `Bearer ${data.token}` }),\r\n            },\r\n            ...(!!body && { body: JSON.stringify({ 'password': body.password, 'email': body.email }) }),\r\n        };\r\n        return fetch(`${this._host}${data.endpoint}`,config).\r\n        then(res => this._responseAnalysis(res))\r\n    }\r\n\r\n    register(data, body) {\r\n        return this._request(data, body)\r\n    };\r\n\r\n    authorization(data, body) {\r\n        return this._request(data, body)\r\n    }\r\n\r\n    checkToken(data) {\r\n        return this._request(data,)\r\n    }\r\n\r\n}\r\n\r\n\r\nconst apiAuth = new ApiAuth({\r\n    host: 'https://auth.nomoreparties.co/',\r\n    headers: { \"Content-Type\": \"application/json\" }\r\n})\r\n\r\nexport default apiAuth;\r\n\r\n"],"mappings":"AAEA,MAAMA,OAAN,CAAc;EACVC,WAAW,CAACC,OAAD,EAAU;IACjB,KAAKC,KAAL,GAAaD,OAAO,CAACE,IAArB;IACA,KAAKC,QAAL,GAAgBH,OAAO,CAACI,OAAxB;EAEH;;EAEDC,iBAAiB,CAACC,GAAD,EAAM;IACnB;;IACA,IAAIA,GAAG,CAACC,EAAJ,IAAUD,GAAG,CAACE,MAAJ,KAAe,GAA7B,EAAkC;MAAE,OAAOF,GAAG,CAACG,IAAJ,EAAP;IAAoB;;IACxD,OAAOC,OAAO,CAACC,MAAR,CAAeL,GAAG,CAACE,MAAnB,CAAP;EACH,CAXS,CAaV;EACA;EACA;EACA;EACA;EACA;EACA;;;EAGAI,QAAQ,CAACC,IAAD,EAAOC,IAAP,EAAa;IACjB;IACA,MAAMC,MAAM,GAAG;MACXC,MAAM,EAAEH,IAAI,CAACI,UADF;MAEXb,OAAO,EAAE;QACLA,OAAO,EAAE,KAAKD,QADT;QAEL,IAAI,CAAC,CAACU,IAAI,CAACK,KAAP,IAAgB;UAAEC,aAAa,EAAG,UAASN,IAAI,CAACK,KAAM;QAAtC,CAApB;MAFK,CAFE;MAMX,IAAI,CAAC,CAACJ,IAAF,IAAU;QAAEA,IAAI,EAAEM,IAAI,CAACC,SAAL,CAAe;UAAE,YAAYP,IAAI,CAACQ,QAAnB;UAA6B,SAASR,IAAI,CAACS;QAA3C,CAAf;MAAR,CAAd;IANW,CAAf;IAQA,OAAOC,KAAK,CAAE,GAAE,KAAKvB,KAAM,GAAEY,IAAI,CAACY,QAAS,EAA/B,EAAiCV,MAAjC,CAAL,CACPW,IADO,CACFpB,GAAG,IAAI,KAAKD,iBAAL,CAAuBC,GAAvB,CADL,CAAP;EAEH;;EAEDqB,QAAQ,CAACd,IAAD,EAAOC,IAAP,EAAa;IACjB,OAAO,KAAKF,QAAL,CAAcC,IAAd,EAAoBC,IAApB,CAAP;EACH;;EAEDc,aAAa,CAACf,IAAD,EAAOC,IAAP,EAAa;IACtB,OAAO,KAAKF,QAAL,CAAcC,IAAd,EAAoBC,IAApB,CAAP;EACH;;EAEDe,UAAU,CAAChB,IAAD,EAAO;IACb,OAAO,KAAKD,QAAL,CAAcC,IAAd,CAAP;EACH;;AA9CS;;AAmDd,MAAMiB,OAAO,GAAG,IAAIhC,OAAJ,CAAY;EACxBI,IAAI,EAAE,gCADkB;EAExBE,OAAO,EAAE;IAAE,gBAAgB;EAAlB;AAFe,CAAZ,CAAhB;AAKA,eAAe0B,OAAf"},"metadata":{},"sourceType":"module"}